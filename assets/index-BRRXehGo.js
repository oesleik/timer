import{j as e,g as b,L as g,r as a,u as f,a as j,b as p,A as h,c as v,M as w,d as C,e as y,f as N,H as P,R as S,h as m,C as R}from"./ChromeCastReceiverRoute--bmedpiD.js";const k=()=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-2xl flex flex-col items-center justify-center h-screen gap-3 py-5 px-5 max-w-xl mx-auto",children:b().map(t=>e.jsx(g,{to:"mode/"+t.ref,className:"text-center px-6 py-2 w-full bg-echo-yellow-500 text-echo-black-500 font-medium rounded-lg border-2 focus:border-echo-white-500 hover:border-echo-white-500 cursor-pointer",children:t.description},t.ref))})}),E=()=>e.jsx(k,{}),M=({modeSettings:t,setCustomSettings:s})=>{const n=t.customParams||{},[r,o]=a.useState(()=>{const c={};return Object.entries(n).forEach(([l,u])=>{c[l]=String(u.defaultValue)}),c}),i=(c,l)=>o(u=>({...u,[c]:l}));a.useEffect(()=>{Object.keys(t.customParams||{}).length||s(r)},[t,s,r]);const x=()=>{s(r)};return Object.keys(n).length?e.jsx(e.Fragment,{children:e.jsxs("form",{onSubmit:()=>{},className:"text-2xl",children:[Object.entries(n).map(([c,l])=>e.jsx(A,{param:l,value:r[c],setValue:u=>i(c,u)},c)),e.jsx("button",{type:"button",onClick:()=>x(),className:"text-center w-full px-6 py-2 bg-echo-yellow-500 text-echo-black-500 font-medium rounded-lg mr-4 border-2 focus:border-echo-white-500 hover:border-echo-white-500 cursor-pointer",children:"Continuar"})]})}):null},A=({param:t,value:s,setValue:n})=>t.inputType==="number"?e.jsxs(e.Fragment,{children:[e.jsx("label",{className:"block text-echo-white-500 text-sm font-bold mb-2",children:t.description}),e.jsx("input",{type:"number",value:s,onChange:r=>n(r.target.value),className:"shadow appearance-none border rounded w-full py-2 px-3 mb-6 text-echo-white-500 leading-tight focus:outline-none focus:shadow-outline"})]}):t.inputType==="options"?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-echo-white-500 text-sm font-bold mb-2",children:t.description}),t.options.map((r,o)=>e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",value:r.value,checked:s===r.value,onChange:i=>n(i.target.value),className:"mr-2"}),r.label]},o))]})}):e.jsx(e.Fragment,{}),I=({modeSettings:t})=>{const s=f(),n=r=>{const o=new URLSearchParams(r);s("/timer/"+t.ref+"?"+o.toString())};return e.jsxs("div",{className:"flex flex-col h-screen py-5 px-5",children:[e.jsxs("div",{className:"mb-5",children:[e.jsx(F,{onClick:()=>s("/"),children:"Voltar"}),e.jsx("h1",{className:"inline-block ml-5",children:t.description})]}),e.jsx("div",{className:"text-2xl flex flex-col items-center justify-center h-full max-w-xl mx-auto",children:e.jsx(M,{modeSettings:t,setCustomSettings:n})})]})},F=({className:t,children:s,...n})=>e.jsx(e.Fragment,{children:e.jsx("button",{type:"button",className:["bg-echo-gray-500 px-6 py-2 cursor-pointer rounded-lg text-echo-white-500 border-echo-gray-500 border-2 focus:border-echo-white-500 hover:border-echo-white-500",t].join(" "),...n,children:s})}),O=()=>{const t=j(),s=p(t.mode||"");return e.jsx(I,{modeSettings:s})};var T=function(){var t=null;return function(){return t===null&&(t=new Promise(function(s){var n=document.createElement("script");n.src="https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1",window.__onGCastApiAvailable=function(r){r&&s({chrome,cast})},document.body.appendChild(n)})),t}}(),_=function(){var t=a.useState({chrome:null,cast:null}),s=t[0],n=t[1];return a.useEffect(function(){T().then(function(r){n(r)})},[]),s};const L=()=>{const{cast:t}=_();a.useEffect(()=>{t&&t.framework.CastContext.getInstance().setOptions({receiverApplicationId:h.CHROMECAST_APP_ID,autoJoinPolicy:chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED})},[t]);const s=a.useCallback((n,r)=>{if(!t)return;const o=t.framework.CastContext.getInstance().getCurrentSession();o&&o.sendMessage(h.TIMER_CHANNEL_NAMESPACE,JSON.stringify({action:n,data:r}))},[t]);return{isLoaded:t!=null,sendMessage:s}},D=({modeSettings:t,roundSettings:s})=>{const{sendMessage:n}=L(),r=f(),o=v(s);return a.useEffect(()=>{n("setIsRunning",{isRunning:o.isRunning})},[o.isRunning,n]),e.jsxs("div",{className:"flex flex-col h-full px-5",children:[e.jsxs("div",{className:"flex justify-between gap-5 pt-5",children:[e.jsxs("div",{children:[e.jsx(d,{onClick:()=>r("/"),children:"Voltar"}),e.jsx("h1",{className:"inline-block ml-5",children:t.description})]}),e.jsx("div",{className:"h-8 cursor-pointer ml-5 mt-2 mr-2",children:e.jsx("google-cast-launcher",{})})]}),e.jsx("div",{className:"flex flex-col h-full justify-center",children:e.jsx(w,{roundSettings:s,mainTimerState:o},o.executionUid)}),e.jsx("div",{className:"max-w-xl mx-auto pb-5 pt-2",children:e.jsx(H,{...o})})]})},d=({className:t,children:s,...n})=>e.jsx(e.Fragment,{children:e.jsx("button",{type:"button",className:["bg-echo-gray-500 px-6 py-2 cursor-pointer rounded-lg text-echo-white-500 border-echo-gray-500 border-2 focus:border-echo-white-500 hover:border-echo-white-500",t].join(" "),...n,children:s})}),H=({isStarted:t,isRunning:s,isFinished:n,pause:r,resume:o,reset:i})=>n?e.jsx(d,{onClick:()=>i(),children:"Reiniciar"}):s?s?e.jsx(d,{onClick:()=>r(),children:"Parar"}):null:t?e.jsx(d,{onClick:()=>o(),children:"Continuar"}):e.jsx(d,{onClick:()=>o(),children:"Iniciar"}),V=()=>{const t=j(),s=C(),n=new URLSearchParams(s.search),r={};n.forEach((x,c)=>{r[c]=x});const o=p(t.mode||""),i=y(o,r);return e.jsx(D,{modeSettings:o,roundSettings:i})};N.createRoot(document.getElementById("root")).render(e.jsx(a.StrictMode,{children:e.jsx(P,{children:e.jsxs(S,{children:[e.jsx(m,{index:!0,element:e.jsx(E,{})}),e.jsx(m,{path:"/mode/:mode",element:e.jsx(O,{})}),e.jsx(m,{path:"/timer/:mode",element:e.jsx(V,{})}),e.jsx(m,{path:"/receiver",element:e.jsx(R,{})})]})})}));
